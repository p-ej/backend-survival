# DTO


### DTO란
- Data Transfer Object 직번을 **하자면 데이터 전송 객체**라고 한다.
- DTO는 우리가 곧 알아야하는 **계층 간 데이터 전송을 위해 사용되는 객체**라고 보면 된다.
- `정확히는 원격을 통한 프로세스간 통신에서 비용처리가 많이 들때 사용한다고 하는데, 다른 곳에서도 활용할 수 있다는 점.`

> 계층 간에 사용을 한다고 ? 
- 기존에 계층(Tier)이라는 것을 배웠었다. 프론트/백을 구분 지으면 이 사이에 DTO를 사용한다 볼 수 있는데 알아보니까 백엔드/DB에도 사용된다고 한다. 
    - `프레젠테이션 : 프론트`
    - `애플리케이션 : 백`
    - `데이터 : DB`
- 간략하게 보자면 프론트/백이 통신할 때도 사용할 수 있고, 백엔드와 DB 사이에 통신하는데에도 사용할 수 있다. 
- 서버측 코드 다른 계층간에서도 사용 가능.
    - Controller, Servcie, ...
- DTO 안에서는 데이터에 대한 Getter, Setter만을 가져야 한다고 한다. 
    - `단순하게 getter와 setter로만 이루어짐`
- 비즈니스적인 로직을 가져서는 안된다. 
- `저장, 검색, 직렬화, 역직렬화` 같은 로직만

> 직렬화에 대한 설명
- 데이터 구조나 오브젝트 상태를 동일하거나 다른 컴퓨터 환경에 저장(이를테면 파일이나 메모리 버퍼에서, 또는 네트워크 연결 링크 간 전송)하고, 나중에 재구성할 수 있는 포맷으로 변환하는 과정
- 만약 JSON 형태로 클라이언트측에서 서버에 요청을 보냈는데 통신 과정에서는이가 어느 일정한 형태의 데이터로 변경된다는 것 같다. (예를 들어 문자열이라거나 ?)
    - 내가 경험한 것 중 하나는 Query String으로 boolean값을 전송받고 싶었는데 서버에서 이를 string 형태로만 요청을 받았다. 그래서 DTO나 비즈니스 로직을 통해 boolean 값을 형태를 변환한 적이 있다.
- `역직렬화`도 존재한다 이건 말 그대로 직렬화의 반대다.
- **자바에서는 직렬화 시 데이터를 바이트 스트림 형태로 변환한다고 한다.**

#### IPC(Inter-Process Communication) 보완
- 사전적 정의 : **프로세스들 사이에 데이터를 주고받는 행위**
- Java 프로세스가 공유 메모리, 메시지 전달 또는 기타 수단을 통해 서로 통신할 수 있도록 하는 Java RMI, JMS(Java Message Service) 및 JNI(Java Native Interface)와 같은 메커니즘을 포함한다. 
- 이러한 메커니즘은 일반적으로 Java로 완전히 구축되고 단일 시스템 또는 시스템 클러스터에서 실행되는 보다 전통적인 모놀리식 애플리케이션에서 사용된다.


#### VO와 DTO 차이 
- VO는 변경 불가능 
    - 예를 들면 날짜를 나타내는 Value Object가 있는 경우 해당 개체의 값은 일단 생성되면 변경할 수 없어야 한다. 날짜를 수정해야 하는 경우 업데이트된 값으로 새 Value Object를 만든다.
- DTO와 달리 VO는 일반적으로 객체 값의 유효성 검사 및 조작과 관련된 동작이 있을 수 있다. (비즈니스 로직?)
- VO는 객체의 주소값이 아닌 값으로만 판단한다. 
    - 동일한 두 값의 객체는 같다고 판단.
- 아직도 많이 헷갈리지만, 크게 보자면
    - DTO는 프로그램의 서로 다른 계층 혹은 계층 간 데이터 전송
    - VO는 프로그램의 단일 계층 혹은 계층 내 불변 값을 나타냄.
- Setter 성격을 가지고 있는 메서드는 가져서는 안되며 오로지 생성자로만 값을 초기화해야하고 Getter 성격의 메서드만 사용한다.

### “무기력한 도메인 모델” 이란 그리고 안티 패턴인 이유?
- 이것이 너무 어려워 찾아봤는데, 그나마 이해한 것이 “무기력한 도메인 모델”은 **getter/setter만 있는 객체**라고 한다..
- 도메인 모델에 비즈니스적으로 유의미한 내용을 갖고 있지 않은 것들

### 자바빈즈(JavaBeans)
- POJO (일반적인 자바 프로그래밍)기반의 클래스
- 주로 클라이언트와 서버 사이에서 사용한다. 
- VO랑 비슷해보인다 ..
- Getter, Setter도 존재한다.
- 특정 형태의 클래스를 가리키는 것이라고 한다. 
- 클래스들이 복합적으로 이루어진 구조

### EJB(Enterprise JavaBeans)
- 서버에서만 사용한다. 
- 자바 빈즈와 다른 개념이라고 생각하면 된다. 
- 비즈니스 로직 처리 
- 스프링의 빈?

### Java의 record
- **불변(immutable) 데이터 객체를 쉽게 생성할 수 있도록 하는 새로운 유형의 클래스**라고 하는데, 사용해본적이 없어서 코드를 보며 이해하고자 한다. 
- 기본 불변 데이터 객체를 보면 필드를 final로 선언하고 생성자나 getter를 사용했다. 
- 결국 상태를 보유하는 불변 객체를 생성하려면 코드를 많이 작성해야하는데 `레코드(Record)`를 이용하면 간결한 방식으로 불변 객체를 만들 수 있다.

```java
public record Animal(String name, int age) {
}
```
- 이렇게 정의가 가능하고 toString, equals, hashCode 메소드를 제공해준다. 또 생성자를 작성하지 않아도 된다.


### DAO
- DB 데이터에 접근하기 위한 객체이다. 
- 나는 Nestjs 프레임워크라 Repository 패턴을 사용하고 있는데 Java의 DAO랑 동일한 패턴이라고 생각한다.
- DB에 접근하여 data를 CRUD 기능을 수행하면서 Service와 DB를 통신한다
    - service -> repository 

### ORM
- 객체 관계 매핑(Object Relational Mapping)의 약자이며, 단어 뜻 그대로 객체와 DB의 관계를 매핑해주는 도구다.
- SQL 문을 직접 작성하지 않고 엔티티를 객체로 표현
- 쉽게 말하면 프로그래밍 코드로 로우 쿼리(SQL)를 대신한다고 보면 될 거 같다. 
    - table을 만들때나 DML을 사용할때 해당 언어를 코드안에 작성한다고 생각하면 ORM 프레임워크를 이용하여 각 언어의 메서드들을 제공해주니 이것을 이용하면 쿼리를 직접 작성하지 않아도 쿼리가 생성되어 DB와 소통이 가능하다. 
- 비즈니스 로직에 집중이 가능
- 허나 너무 복잡한 쿼리는 ORM으로 구성하기가 힘들다. 나또한 로우 쿼리를 먼저 작성 후 ORM으로 옮기는 편이다.
- 나중에는 테이블 생성에만 사용하고 싶다...

## 학습 키워드
- DTO (Data Transfer Object) 란
    - 프로세스 간 통신(IPC, Inter-Process Communication)
- “무기력한 도메인 모델” 이란 그리고 안티 패턴인 이유
- 자바빈즈(JavaBeans)
- EJB(Enterprise JavaBeans)
- Java의 record
- DAO
- ORM



[![Hits](https://hits.sh/p-ej.gitbook.io/devroad-backend/megatera-backend/introduction.svg)](https://hits.sh/p-ej.gitbook.io/devroad-backend/megatera-backend/introduction/)