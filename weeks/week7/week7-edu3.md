# Embeddable


### Embeddable란?
JPA(Java Persistence API) 컨텍스트에서 임베드 가능 항목은 엔티티 클래스 내에 임베드할 수 있는 값 오브젝트 또는 컴포넌트를 나타내는 클래스입니다. 엔터티 내에서 복잡한 데이터 구조 또는 구성 요소를 캡슐화하고 재사용할 수 있습니다.

포함 가능한 클래스는 다른 엔터티 클래스에 포함할 수 있음을 나타내는 `@Embeddable` 주석으로 표시됩니다. 포함 가능한 구성 요소의 속성을 나타내는 특성 집합을 정의합니다. 이러한 속성은 포함 가능한 다른 클래스를 포함하여 유효한 모든 Java 유형일 수 있습니다.

포함 가능한 개체에 대한 몇 가지 핵심 사항은 다음과 같습니다.

1. 재사용성: 포함 가능한 개체는 복잡한 데이터 구조 또는 구성 요소를 한 번 정의하고 여러 엔터티 클래스에서 재사용할 수 있도록 하여 코드 재사용을 촉진합니다. 관련 속성을 단일 논리 단위로 캡슐화하는 방법을 제공합니다.

2. 값 의미론: 포함 가능한 개체에는 값 의미론이 있습니다. 즉, ID가 있는 엔터티가 아닌 값으로 취급됩니다. 속성 값이 동일한 두 개의 포함 가능한 개체는 별도의 인스턴스인 경우에도 동일한 것으로 간주됩니다.

3. 데이터베이스 매핑: 포함 가능한 개체는 일반적으로 소유 엔터티와 동일한 테이블 내의 열 집합에 매핑됩니다. 포함 가능한 클래스의 특성은 데이터베이스 테이블의 열에 매핑되어 값을 소유 엔터티와 함께 저장하고 검색할 수 있습니다.

4. 캡슐화: 포함 가능한 개체는 속성을 캡슐화하고 상태에 액세스하고 수정하기 위한 getter 및 setter 메서드를 제공합니다. 이는 데이터 무결성을 유지하고 포함된 구성 요소와 관련된 비즈니스 규칙을 시행하는 데 도움이 됩니다.

5. 관계 매핑: 포함 가능한 개체는 엔터티 간의 관계를 나타내는 데에도 사용할 수 있습니다. 예를 들어 포함 가능한 개체를 사용하여 엔터티 간의 일대일 또는 일대다 관계를 모델링할 수 있습니다.

포함 가능한 클래스의 예는 다음과 같습니다.

```자바
@Embeddable
public class Address {
    private String street;
    private String city;
    private String postalCode;

    // Constructors, getters, setters, etc.
}
```

이 예에서 `Address` 클래스는 `@Embeddable`로 표시되어 포함 가능한 구성 요소임을 나타냅니다. `street`, `city` 및 `postalCode` 속성을 캡슐화하는 값 개체를 나타냅니다. 이 클래스는 하나 이상의 엔터티 클래스에 포함될 수 있습니다.

포함 가능한 개체는 JPA 엔터티 내에서 복잡한 데이터를 구조화하고 구성하는 방법을 제공합니다. 이를 통해 재사용 가능한 구성 요소를 정의하고, 코드 모듈성을 개선하고, 관련 속성의 매핑을 단순화할 수 있습니다.


### Aggregate Mapping
복합 매핑 또는 구성 요소 매핑이라고도 하는 집계 매핑은 Hibernate 또는 JPA(Java Persistence API)와 같은 ORM(개체 관계형 매핑) 프레임워크에서 제공하는 기능입니다. 이를 통해 집계라고 하는 복잡한 값 개체를 데이터베이스 테이블의 단일 열 또는 열 집합에 매핑할 수 있습니다.

개체 지향 프로그래밍에서 집계는 관련 특성 또는 속성 그룹을 캡슐화하는 개체입니다. 이는 응집력 있는 단위를 나타내며 단일 엔터티로 취급될 수 있습니다. 집계 매핑은 관계형 데이터베이스에서 이러한 집계를 유지하고 검색하는 방법을 제공합니다.

집계 매핑에 대한 몇 가지 핵심 사항은 다음과 같습니다.

1. 집계: 집계는 일반적으로 함께 속하고 강력한 의미론적 관계를 갖는 여러 속성 또는 속성으로 구성됩니다. 값 개체 또는 엔터티의 구성 요소일 수 있습니다. 집계는 종종 복잡한 데이터 구조 또는 재사용 가능한 구성 요소를 모델링하는 데 사용됩니다.

2. 열에 매핑: 집계 매핑을 사용하면 집계를 데이터베이스 테이블의 하나 이상의 열에 매핑할 수 있습니다. 집계의 특성은 테이블 내의 개별 열에 매핑되어 집계의 상태를 저장하고 검색하는 방법을 제공합니다.

3. 포함 가능한 개체: JPA에서 집계는 종종 포함 가능한 개체로 표시됩니다. 포함 가능한 개체는 엔터티 또는 다른 포함 가능한 개체 내에 포함할 수 있는 값 개체입니다. 이는 `@Embeddable` 주석으로 표시되며 해당 속성은 연관된 엔티티 테이블의 열에 맵핑됩니다.

4. 매핑 주석: 집계 매핑을 정의하기 위해 Hibernate 또는 JPA와 같은 ORM 프레임워크는 특정 주석을 제공합니다. 예를 들어 JPA는 '@Embedded' 주석을 제공하여 속성이 포함된 집계를 나타냄을 나타냅니다. 또한 `@AttributeOverride` 또는 `@AttributeOverrides` 주석을 사용하여 집계 내 개별 속성의 매핑을 사용자 정의할 수 있습니다.

5. 계단식 작업: 집계 매핑을 사용하면 지속, 업데이트 또는 삭제와 같은 작업에 대한 계단식 동작을 정의할 수 있습니다. 집계가 포함된 엔터티가 지속되거나 업데이트되면 포함된 집계에도 작업을 계단식으로 연결할 수 있습니다.

6. 재사용성 및 캡슐화: 집계 매핑은 복잡한 구성 요소를 집계로 정의할 수 있도록 하여 재사용성과 캡슐화를 촉진합니다. 집계는 여러 엔터티에서 재사용할 수 있으므로 공통 데이터 구조를 나타내는 모듈식 및 재사용 가능한 방법을 제공합니다.

집계 매핑을 사용하면 개체-관계형 매핑에서 복잡한 데이터 구조와 재사용 가능한 구성 요소를 처리할 수 있습니다. 응집력 있는 단위로 집계를 유지하고 검색하는 방법을 제공하여 매핑 프로세스를 단순화하고 코드의 유지 관리 및 가독성을 향상시킵니다.

집계 매핑은 ORM 프레임워크에 따라 다르며 사용 중인 프레임워크에 따라 변형 또는 추가 기능이 있을 수 있습니다.


### Value Object 
소프트웨어 개발에서 값 개체는 개념적으로 독립적인 값 또는 데이터 조각을 나타내는 개체 유형입니다. 일반적으로 변경할 수 없습니다. 즉, 일단 생성되면 상태를 수정할 수 없습니다. 값 개체는 특정 의미 또는 특성으로 값을 캡슐화하고 모델링하는 데 사용됩니다.

다음은 값 개체의 몇 가지 주요 특성과 이점입니다.

1. 불변성: 값 객체는 불변입니다. 즉, 생성 후 상태를 변경할 수 없습니다. 값 개체를 수정하면 새 인스턴스가 생성됩니다. 불변성은 값 개체의 상태가 일관되게 유지되도록 보장하고 의도하지 않은 부작용을 피하는 데 도움이 됩니다.

2. 평등과 정체성: 가치 대상은 주로 정체성보다는 가치에 의해 정의됩니다. 동일한 값을 가진 두 개의 값 개체는 동일한 인스턴스인지 여부에 관계없이 동일한 것으로 간주됩니다. 이를 통해 더 간단한 동등성 비교가 가능하고 특정 프로그래밍 작업을 단순화할 수 있습니다.

3. 의미적 의미: 값 개체는 개념적으로 의미 있는 값 또는 데이터 조각을 나타냅니다. 그들은 잘 정의된 의미 체계를 가지고 있으며 그들이 나타내는 값과 관련된 동작 또는 작업을 캡슐화할 수 있습니다. 예를 들어 'Date' 값 개체는 날짜 계산 또는 서식 지정을 위한 메서드를 캡슐화할 수 있습니다.

4. 캡슐화: 값 개체는 내부 상태를 캡슐화하고 해당 상태와 상호 작용하고 조작하는 방법을 제공합니다. 그들은 종종 그들이 나타내는 가치에 특정한 제약 조건과 규칙을 적용합니다. 이 캡슐화는 데이터 무결성을 유지하고 유효하지 않거나 일관성 없는 데이터의 위험을 줄이는 데 도움이 됩니다.

5. 재사용성: 값 개체는 응용 프로그램의 여러 부분에서 재사용할 수 있습니다. 특정 값 또는 데이터 유형의 재사용 가능하고 독립적인 표현을 제공합니다. 이는 모듈성을 촉진하고 코드 중복을 줄이며 전체 코드 구성을 개선합니다.

6. 스레드 안전성: 불변성으로 인해 값 개체는 본질적으로 스레드로부터 안전합니다. 여러 스레드는 명시적인 동기화 메커니즘 없이도 값 개체에 안전하게 액세스하고 사용할 수 있습니다.

값 개체의 일반적인 예로는 정수, 문자열, 날짜 및 금액과 같은 다양한 기본 유형이 있습니다. 또한 지리적 좌표, 전자 메일 주소, 우편 주소 또는 사회 보장 번호와 같은 도메인 내의 특정 개념을 나타내기 위해 도메인별 값 개체를 만들 수 있습니다.

값 개체는 도메인 개념을 모델링하고 비즈니스 규칙을 적용하는 데 중요한 역할을 하는 DDD(도메인 기반 디자인) 패턴과 같은 다른 디자인 패턴과 함께 자주 사용됩니다.

값 개체를 사용하면 특정 값을 의미 있는 의미 체계 및 동작을 포함하는 자체 포함 엔터티로 캡슐화하고 처리하여 코드의 명확성, 표현력 및 유지 관리 가능성을 개선할 수 있습니다.


### JPA Annotations
1. `@Entity`: `@Entity` 주석은 Java 클래스를 엔티티로 표시하여 데이터베이스 테이블에 매핑되었음을 나타내는 데 사용됩니다. 엔터티는 데이터베이스에서 저장 및 검색되는 영구 개체를 나타냅니다. 각 엔터티 클래스는 일반적으로 열을 나타내는 속성이 있는 데이터베이스의 테이블에 해당합니다.

2. `@Table`: `@Table` 주석은 엔터티와 관련된 테이블의 세부 정보를 지정하는 데 사용됩니다. 테이블 이름, 스키마 및 기타 속성을 사용자 지정할 수 있습니다. 기본적으로 JPA는 테이블 이름이 엔티티 클래스 이름과 같다고 가정합니다.

3. `@Id`: `@Id` 주석은 필드 또는 속성을 엔터티의 기본 키로 지정하는 데 사용됩니다. 해당 속성이 엔터티의 각 인스턴스에 대한 고유 식별자를 나타냄을 나타냅니다. 엔터티에서 하나의 속성에만 `@Id`로 주석을 달아야 합니다.

4. `@Embeddable`: `@Embeddable` 주석은 클래스를 포함 가능한 구성 요소 또는 값 개체로 표시하는 데 사용됩니다. 포함 가능 항목은 소유 엔터티와 동일한 테이블 내에 포함된 엔터티 상태의 일부를 나타냅니다. 엔터티 내의 복잡한 데이터 구조 또는 구성 요소를 재사용하고 캡슐화할 수 있습니다.

5. `@Embedded`: `@Embedded` 주석은 엔터티 내의 특성이 포함된 구성 요소 또는 값 개체임을 지정하는 데 사용됩니다. 해당 특성이 포함 가능한 클래스의 인스턴스임을 나타냅니다. 포함된 개체의 특성은 소유 엔터티와 동일한 테이블 내의 열에 매핑됩니다.

다음은 이러한 주석의 사용을 보여주는 예입니다.

```java
@Entity
@Table(name = "employees")
public class Employee {

    @Id
    private Long id;

    private String firstName;

    private String lastName;

    @Embedded
    private Address address;

    // Constructors, getters, setters, etc.
}

@Embeddable
public class Address {

    private String street;

    private String city;

    private String postalCode;

    // Constructors, getters, setters, etc.
}
```

이 예에서 `Employee` 클래스는 `@Entity`로 표시되어 영구 엔티티임을 나타냅니다. `@Table` 주석은 "employees" 테이블에 매핑됨을 지정합니다. `id` 필드는 기본 키로 `@Id`로 표시됩니다. `Address` 클래스는 `@Embeddable`로 표시되어 포함 가능한 구성 요소임을 나타냅니다. `Employee` 클래스 내의 `address` 필드는 임베디드 개체임을 지정하는 `@Embedded`로 표시됩니다.

이러한 주석은 JPA 제공자에게 메타데이터를 제공하여 엔티티 및 관련 속성을 데이터베이스 테이블 및 열에 매핑하고 지속성 작업을 처리할 수 있도록 합니다.

JPA는 관계 매핑, 제약 조건 지정, 가져오기 전략 제어 등 다양한 목적을 위해 광범위한 주석을 제공한다는 점에 유의해야 합니다. 언급한 주석은 엔터티 및 포함 가능한 매핑에 일반적으로 사용되는 하위 집합일 뿐입니다.


## 학습 키워드
- Aggregate Mapping
- Value Object
- JPA 어노테이션
    - @Entity
    - @Table
    - @Id
    - @Embeddable
    - @Embedded