# ORM



### ORM이란 
- **객체지향프로그래밍의 개념을 사용하여 관계형 데이터베이스와 상화 작용할 수 있도록 하는 기술 혹은 프레임워크이다.**
- 데이터베이스 테이블과 레코드를 객체 인스턴스에 자동으로 매핑하거나 그 반대로 매핑해서 관계형 데이터베이스와 객체 지향 프로그래밍 언어 사이의 격차를 해소한다.
- ORM은 수동으로 SQL 쿼리를 작성하고 쿼리 결과를 객체에 매핑하는 기존 접근 방식에 비해 높은 수준의 추상화를 제공한다고 한다.
- 개발자가 클래스, 개체 및 상속과 같은 친숙한 객체 지향 패러다임으로 작업할 수 있도록 하여 데이터베이스 작업을 단순화 할 수 있다.
- 인기 있는 ORM의 예로는 Hibernate, EclipseLink 및 Spring Data JPA가 있다.


#### 특징 
1. **객체-관계형 매핑**
  - 데이터베이스 테이블을 개체 클래스에 매핑하고 데이터베이스 레코드를 개체 인스턴스에 매핑하는 것
  - 일반적으로 객체 속성 또는 필드가 데이터베이스 열에 대응하는 방법을 지정하는 메타데이터 또는 주석을 사용하여 정의된다.

2. **데이터베이스 추상화**
  - 개발자가 원시 SQL 쿼리를 작성할 필요 없이 데이터베이스와 상호 작용할 수 있는 추상화 수준을 제공한다.
  - CRUD(만들기, 읽기, 업데이트, 삭제) 작업, 쿼리 및 트랜잭션 관리와 같은 일반적인 데이터베이스 작업을 수행하기 위한 일련의 API 또는 메서드를 제공한다.

> 생각해보니 내가 사용하고 있는 Typeorm도 CRUD를 하는 쿼리 메서드를 제공한다. (대표적 쿼리빌더)

3. **단순화된 데이터 액세스**
  - 개발자는 ORM을 사용하여 복잡한 SQL 문을 작성하는 대신 객체 지향 구성 및 구문을 사용하여 데이터베이스 작업을 수행할 수 있다.
  - 이 역시 코드를 단순화하고 유지 보수 및 좋은 가독성을 쉽게 만든다.

4. **Portability(직번 : 이동성)**
  - 특정 데이터베이스 구현 세부 정보를 추상화하여 애플리케이션 코드를 변경하지 않고도 다른 데이터베이스 시스템 간에 쉽게 전환할 수 있다.
  - 공통 API 호출을 적절한 데이터베이스별 SQL 언어로 변환하는 작업을 처리한다.


5. **자동 쿼리 생성**
  - 종종 개발자가 선언적인 API를 사용하여 쿼리를 구성할 수 있는 쿼리 생성 기능을 제공한다.
  - 해당 SQL 문을 생성하여 복잡한 쿼리를 작성하는 데 필요한 수동 작업을 줄인다.

6. **관계 관리**
  - ORM은 일대일, 일대다 및 다대다 관계를 포함하여 개체와 테이블 간의 관계를 처리한다.
  - 자연스러운 객체 지향 방식으로 이러한 관계를 탐색하고 관리하기 위한 메커니즘을 제공한다.

> 테이블 생성할때 어노테이션으로 테이블 관계 설정을 위해서 OneToMany 같은 걸 사용하는 것을 뜻하는거같다.

7. **캐싱 및 성능 최적화**
  - 캐싱 메커니즘을 통합하여 데이터베이스 쿼리 수를 줄여 성능을 향상시킬 수 있다.
  - 자주 액세스하는 데이터를 캐시하고 관련 객체를 가져와서 데이터베이스 왕복 횟수를 최소화할 수 있다.

> typeorm도 캐싱 기능이 존재한다. 레디스를 사용하고 typeorm 쿼리 구현 부문에 cache 메서드를 사용하면 해당 쿼리가 레디스에 저장된다. 근데 이게 어떻게 DB를 연결하지 않고 값을 가져오게 되는 것인지 원리는 잘 모른다...


### JPA(Jakarta Persistence API)
- **관계형 데이터베이스에서 데이터 액세스, 관리 및 유지를 위한 표준 프로그래밍 인터페이스를 제공하는 Java 진영 ORM**
- Jakarta EE(이전의 Java EE) 플랫폼의 일부이며 기본 데이터베이스 관리 시스템에 대한 상위 수준 추상화 역할을 한다.
- 개발자가 Java 클래스를 데이터베이스 테이블에 매핑하고 객체 지향 프로그래밍 개념을 사용하여 일반적인 데이터베이스 작업을 수행할 수 있도록 하는 일련의 주석이나 API를 정의한다.
- 복잡한 SQL 쿼리를 작성할 필요가 없다.
- 데이터베이스 상호작용에 대해 일관되고 적용 가능한 접근 방식을 제공하여 데이터베이스 기반 애플리케이션의 개발을 단순화한다.


#### 특징
1. **ORM(Object-Relational Mapping)**
  - `@Entity`, `@Table`, `@Column`과 같은 주석을 사용하여 Java 객체를 데이터베이스 테이블에 매핑할 수 있다.
  - 유연하고 사용자 정의 가능한 객체-관계형 매핑을 허용한다.
   
2. **엔티티 수명 주기 관리**
  - 관련 엔터티에서 자동 더티 검사, 트랜잭션 write-behind 및 계단식 작업(ex: 지속, 병합, 제거)을 지원한다.
   
3. **쿼리 언어**
  - 엔터티 개체를 쿼리하기 위해 특별히 설계된 SQL 유사 쿼리 언어인 JPQL(Java Persistence Query Language)이 포함되어 있다.
  - JPQL을 사용하면 개발자는 엔터티 및 속성 이름을 사용하여 특정 데이터베이스 SQL 구문을 추상화하여 데이터베이스 쿼리를 작성할 수 있다.
  
> 찾아보니까 테이블 대신 객체가 들어간다고 하더라 

4. **트랜잭션 관리**
  - JTA(Java Transaction API)와 같은 트랜잭션 관리 프레임워크와 통합되어 데이터베이스 작업에 대한 ACID(Atomicity, Consistency, Isolation, Durability) 속성을 보장한다.
  - 컨테이너 관리 트랜잭션과 애플리케이션 관리 트랜잭션을 모두 지원
   
5. **캐싱**
  - JPA는 자주 액세스하는 엔터티 개체의 캐싱을 허용하는 캐싱 메커니즘을 제공한다.
  - 데이터베이스 쿼리 및 네트워크 왕복 횟수가 줄어들어 성능이 향상된다.
   
6. **공급업체 독립성**
  - 공급업체 독립적으로 설계되어 개발자가 애플리케이션 코드를 수정하지 않고도 다양한 JPA 구현(예: Hibernate, EclipseLink) 간에 전환할 수 있다.
    - 인터페이스이기 때문에 Hibernate, OpenJPA 등이 JPA를 구현한다고한다.
    - 그 중 Hibernate 유명한 JPA 구현체가 된 것.

### Jakarta EE
- **엔터프라이즈 Java 애플리케이션 개발을 위한 사양 및 표준 세트이다.**
- Java EE(Java Platform, Enterprise Edition) 기술의 후속 기술로 원래 Sun Microsystems에서 개발하고 나중에 Oracle에서 유지 관리한다.
- 분산, 트랜잭션 및 다중 계층 애플리케이션을 구축하기 위한 강력하고 확장 가능한 플랫폼을 제공한다.
- 웹 서비스, 메시징, 지속성, 보안 등과 같은 엔터프라이즈 애플리케이션 개발의 다양한 측면을 다루는 API 및 기술 모음을 포함한다.

#### 특징 및 구성요소
1. **서블릿**
  - HTTP 요청을 처리하고 Java를 사용하여 웹 애플리케이션을 구축하는 표준 방법을 제공한다.
   
2. **JavaServer Pages(JSP)**
  - 개발자가 Java를 사용하여 동적 웹 콘텐츠를 생성할 수 있는 기술인 JSP가 포함되어 있다.
   
3. **Enterprise JavaBeans(EJB)**
  - 확장 가능하고 분산된 트랜잭션 엔터프라이즈 애플리케이션을 개발하기 위한 구성 요소 기반 모델을 제공한다.
   
4. **JPA(Java Persistence API)**
  - Jakarta Persistence API(이전 Java EE의 일부)는 표준화된 방식으로 데이터베이스 작업을 위한 개체 관계형 매핑 프레임워크를 제공하는 사양이다.
   
5. **JMS(Java Message Service)**
  - 구성 요소 간에 비동기적이고 안정적이며 느슨하게 결합된 통신을 구축하기 위한 메시징 API인 JMS가 포함되어 있다.

6. **JTA(Java Transaction API)**
  - 여러 리소스에 걸쳐 분산 트랜잭션을 관리하고 데이터 일관성과 무결성을 보장하는 JTA를 제공한다.
   
7. **보안**
  - 애플리케이션 보안, 인증, 권한 부여 및 암호화 처리를 위한 API 및 메커니즘이 포함되어 있다.
   
8. **웹 서비스**
  - JAX-RS(RESTful 서비스) 및 JAX-WS(SOAP 기반 서비스)와 같은 API를 사용하여 웹 서비스의 개발 및 사용을 지원한다.
   

> Jakarta EE는 공급업체 중립적이고 플랫폼 독립적으로 설계되어 개발자가 다양한 공급업체에서 제공하는 다양한 구현 중에서 선택할 수 있다고 한다.


### Entity
- **데이터베이스 테이블에 매핑되는 영구 데이터 개체를 뜻한다.**
- JPA는 Entity 라는 단위를 활용한다.
- 응용 프로그램 도메인 내의 논리적 데이터 단위를 나타내고 관계형 데이터베이스에서 데이터를 저장하고 검색하는 데 사용된다.
- 엔터티임을 나타내기 위해 '@Entity' 주석이 달린 Java 클래스를 사용한다.
- 엔터티 클래스는 일반적으로 데이터베이스의 테이블에 해당하며 속성이 테이블 열에 매핑된다.
- `@Entity` 주석은 클래스를 지속 가능한 것으로 표시하여 JPA가 해당 클래스 인스턴스의 수명 주기와 지속성을 관리할 수 있도록 한다.

#### 특징
1. **영구 상태**
  - 데이터베이스에 저장할 수 있는 영구 상태를 나타낸다.
  - 속성(인스턴스 변수)은 일반적으로 해당 데이터베이스 테이블의 열에 매핑된다.
   
2. **아이덴티티**
  - 엔터티는 다른 엔터티와 구별되는 고유한 아이덴티티를 가지고 있다.
  - 이 ID는 데이터베이스에서 명시적으로 정의하거나 생성하는 기본 키 속성으로 나타낼 수 있다.

3. **수명 주기 관리**
  - 엔터티의 수명 주기를 관리하기 위한 메커니즘을 제공한다.
  - JPA 작업을 사용하여 생성, 유지, 검색, 업데이트 및 삭제할 수 있다.
  - 엔티티 개체와 기본 데이터베이스 간의 동기화를 관리한다.
   
4. **매핑 주석**
  - 일반적으로 엔티티 속성과 데이터베이스 테이블 구조 간의 매핑을 정의하기 위해 `@Column`, `@Table`, `@JoinColumn`과 같은 다양한 매핑 주석으로 주석 처리된다.
   
5. **연결**
  - 일대일, 일대다 및 다대다 관계와 같은 다른 엔터티와 연결 및 관계를 가질 수 있다.
  - JPA는 이러한 연관을 정의하기 위해 `@OneToOne`, `@OneToMany`, `@ManyToMany`와 같은 주석을 제공한다.

6. **쿼리**
  - JPQL(Java Persistence Query Language)을 사용하여 엔터티를 쿼리할 수 있다.
  - 엔터티 개체를 쿼리하기 위해 특별히 설계된 SQL 유사 쿼리 언어이다.

> JPA 엔터티를 사용하여 도메인별 개체로 작업하고 이러한 개체에 대한 CRUD 작업(만들기, 읽기, 업데이트, 삭제)을 수행하여 낮은 수준의 데이터베이스 상호 작용을 추상화할 수 있다.



## 학습 키워드
- ORM
- JPA(Jakarta Persistence API)
- Jakarta EE
- Entity